<!DOCTYPE HTML>
<!--
	Eventually by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
	<title>System Signal Records</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="pretty-print-json.js"></script>
	<link href="css/pretty-print-json.css" type="text/css" rel="stylesheet" />
	<link href="https://unpkg.com/tabulator-tables@4.3.0/dist/css/tabulator_midnight.min.css" rel="stylesheet">
	<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.3.0/dist/js/tabulator.min.js"></script>
</head>

<body class="is-preload">

	<!-- Header -->
	<header id="header">
		<h1>System Signals</h1>
		<p>Enter a system name to view signals recorded by Canonn field researchers</p>
	</header>


	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/modules/exporting.js"></script>
	<script src="https://code.highcharts.com/modules/export-data.js"></script>
	<script src="https://code.highcharts.com/modules/accessibility.js"></script>
	<script src="https://code.highcharts.com/highcharts-more.js"></script>





	<!-- Signup Form -->
	<script>
		/**
		 * Get the URL parameters
		 * source: https://css-tricks.com/snippets/javascript/get-url-variables/
		 * @param  {String} url The URL
		 * @return {Object}     The URL parameters
		 */
		var getParams = function (url) {
			var params = {};
			var parser = document.createElement('a');
			parser.href = url;
			var query = parser.search.substring(1);
			var vars = query.split('&');
			for (var i = 0; i < vars.length; i++) {
				var pair = vars[i].split('=');
				params[pair[0]] = decodeURIComponent(pair[1]);
			}
			return params;
		};

		var params = getParams(window.location.href);

		$(document).ready(function () {
			if (params.system) {
				//$(#form).submitForm();


				var system = decodeURIComponent(params.system).replace(/\+/g, " ")

				doDisplay(system);

				$("#system").val(system);

			}

		});



		function updateSignals(json) {
			console.log(json);
			var table = new Tabulator("#results-table", {
				data: json.signals,           //load row data from array
				layout: "fitColumns",      //fit columns to width of table
				responsiveLayout: "hide",  //hide columns that dont fit on the table
				tooltips: true,            //show tool tips on cells
				addRowPos: "top",          //when adding a new row, add it to the top of the table
				pagination: "local",       //paginate the data
				paginationSize: 50,         //allow 7 rows per page of data
				movableColumns: true,      //allow column order to be changed
				resizableRows: true,       //allow row order to be changed

				columns: [                 //define the table columns

					{ title: "Body", field: "body", headerFilter: true },
					{ title: "Signal Type", field: "type", headerFilter: true },
					{ title: "Signal Count", field: "count", headerFilter: true },
				],
			});
		}
		function updateEntries(json) {
			console.log(json);
			console.log(json);
			var table = new Tabulator("#entries-table", {
				data: json.signals,           //load row data from array
				layout: "fitColumns",      //fit columns to width of table
				responsiveLayout: "hide",  //hide columns that dont fit on the table
				tooltips: true,            //show tool tips on cells
				addRowPos: "top",          //when adding a new row, add it to the top of the table
				pagination: "local",       //paginate the data
				paginationSize: 50,         //allow 7 rows per page of data
				movableColumns: true,      //allow column order to be changed
				resizableRows: true,       //allow row order to be changed

				columns: [                 //define the table columns

					{ title: "Body", field: "body", headerFilter: true },
					{ title: "Signal#", field: "id", headerFilter: true },
					{ title: "Category", field: "hud_category", headerFilter: true },
					{ title: "Species", field: "english_name", headerFilter: true },
				],

			});
		}

		function doDisplay(system) {
			getSignalEntries(system)
			getSignals(system)
		}

		function getSignalEntries(system) {
			$("#result").text("Searching")

			fetch(encodeURI('https://us-central1-canonn-api-236217.cloudfunctions.net/getSignalEntries?system=' + system))
				.then(response => response.json())
				.then(json => updateEntries(json))
				;
		}
		function getSignals(system) {
			$("#result").text("Searching")

			fetch(encodeURI('https://us-central1-canonn-api-236217.cloudfunctions.net/getSignals?system=' + system))
				.then(response => response.json())
				.then(json => updateSignals(json))
				;
		}
		function submitform() {
			var data = $(this).serializeArray();
			doDecode($('input:text').val(), $("#data").val());
			return false;
		};
	</script>
	<form id="form" method="GET">
		<div id="search-container">
			<input type="text" placeholder="System Name eg. Merope" name="system" id="system">
		</div>
		<input type="submit">
	</form>
	</p>
	<figure class="highcharts-figure">
		<div id="container"></div>
		<p class="highcharts-description">
			This chart shows the range of gravity and temperature of each of the different classes of biology,
			represented by rectangles.
			There are seperate ranges for each body type therefore some biology classes will have different
		</p>
	</figure>
	<script>
		Highcharts.chart('container', {
			chart: {
				type: 'scatter',
				zoomType: 'xy'
			},
			title: {
				text: 'Gravity Vs Temperature Ranges for Biological Signals'
			},
			subtitle: {
				text: 'System: XXXX XX-X x0-0'
			},
			xAxis: {
				title: {
					enabled: true,
					text: 'Surface Temperature (K)'
				},
				startOnTick: true,
				endOnTick: true,
				showLastLabel: true
			},
			yAxis: {
				title: {
					text: 'Gravity (G)'
				}
			},
			plotOptions: {

				scatter: {
					marker: {
						radius: 5,
						states: {
							hover: {
								enabled: true,
								lineColor: 'rgb(100,100,100)'
							}
						}
					},
					states: {
						hover: {
							marker: {
								enabled: false
							}
						}
					},
					tooltip: {
						headerFormat: '<b>{series.name}</b><br>',
						pointFormat: '{point.x} cm, {point.y} kg'
					}
				}
			},
			/*
	"High metal content world":
		{"ming": 0.07489301192, "maxg": 1.361246451, "mint": 191, "maxt": 230},
	"Icy body": 
		{"ming": 0.02514043344, "maxg": 0.1830008426, "mint": 27, "maxt": 133,"volcanism": True},
	"Rocky Ice world": 
		{"ming": 0.05009637503, "maxg": 0.1541432719, "mint": 98, "maxt": 168,"volcanism": True},
	"Rocky body": 
		{"ming": 0.04557216926, "maxg": 0.2123876965, "mint": 90, "maxt": 247,"volcanism": True},
			*/
			series: [
				{ name: 'Amphora Plant (Metal-rich body0', type: 'polygon', data: [[1000.0, 0.04], [1672.0, 0.04], [1672.0, 2.89], [1000.0, 2.89]], showInLegend: false, marker: { enabled: false }, color: 'red', opacity: 0.5 },
				{ name: 'Bark Mound (Rocky body0', type: 'polygon', data: [[184.0, 0.02], [439.0, 0.02], [439.0, 0.46], [184.0, 0.46]], showInLegend: false, marker: { enabled: false }, color: 'brown', opacity: 0.5 },
				{ name: 'Bark Mound (High metal content world0', type: 'polygon', data: [[200.0, 0.03], [439.0, 0.03], [439.0, 2.71], [200.0, 2.71]], showInLegend: false, marker: { enabled: false }, color: 'brown', opacity: 0.5 },
				{ name: 'Bark Mound (Metal-rich body0', type: 'polygon', data: [[1712.0, 3.17], [1712.0, 3.17], [1712.0, 3.18], [1712.0, 3.18]], showInLegend: false, marker: { enabled: false }, color: 'brown', opacity: 0.5 },
				{ name: 'Bark Mound (Rocky Ice world0', type: 'polygon', data: [[200.0, 0.04], [325.0, 0.04], [325.0, 1.77], [200.0, 1.77]], showInLegend: false, marker: { enabled: false }, color: 'brown', opacity: 0.5 },
				{ name: 'Bark Mound (Icy body0', type: 'polygon', data: [[200.0, 0.02], [431.0, 0.02], [431.0, 2.29], [200.0, 2.29]], showInLegend: false, marker: { enabled: false }, color: 'brown', opacity: 0.5 },
				{ name: 'Crystalline Shards (Icy body0', type: 'polygon', data: [[27.0, 0.02], [133.0, 0.02], [133.0, 0.19], [27.0, 0.19]], showInLegend: false, marker: { enabled: false }, color: 'green', opacity: 0.5 },
				{ name: 'Crystalline Shards (Rocky body0', type: 'polygon', data: [[90.0, 0.04], [247.0, 0.04], [247.0, 0.22], [90.0, 0.22]], showInLegend: false, marker: { enabled: false }, color: 'green', opacity: 0.5 },
				{ name: 'Crystalline Shards (Rocky Ice world0', type: 'polygon', data: [[98.0, 0.05], [168.0, 0.05], [168.0, 0.16], [98.0, 0.16]], showInLegend: false, marker: { enabled: false }, color: 'green', opacity: 0.5 },
				{ name: 'Crystalline Shards (High metal content world0', type: 'polygon', data: [[191.0, 0.07], [230.0, 0.07], [230.0, 1.37], [191.0, 1.37]], showInLegend: false, marker: { enabled: false }, color: 'green', opacity: 0.5 },
				{ name: 'Luteolum Anemone (Rocky body0', type: 'polygon', data: [[201.0, 0.04], [438.0, 0.04], [438.0, 1.28], [201.0, 1.28]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Roseum Bioluminescent Anemone (Metal-rich body0', type: 'polygon', data: [[1001.0, 0.04], [4527.0, 0.04], [4527.0, 4.51], [1001.0, 4.51]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Roseum Anemone (Rocky body0', type: 'polygon', data: [[274.0, 0.05], [433.0, 0.05], [433.0, 0.32], [274.0, 0.32]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Roseum Bioluminescent Anemone (High metal content world0', type: 'polygon', data: [[446.0, 0.24], [998.0, 0.24], [998.0, 4.53], [446.0, 4.53]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Blatteum Bioluminescent Anemone (Metal-rich body0', type: 'polygon', data: [[1002.0, 0.05], [2523.0, 0.05], [2523.0, 4.24], [1002.0, 4.24]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Prasinum Bioluminescent Anemone (High metal content world0', type: 'polygon', data: [[472.0, 0.62], [2026.0, 0.62], [2026.0, 9.9], [472.0, 9.9]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Prasinum Bioluminescent Anemone (Rocky body0', type: 'polygon', data: [[111.0, 0.04], [998.0, 0.04], [998.0, 1.84], [111.0, 1.84]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Prasinum Bioluminescent Anemone (Metal-rich body0', type: 'polygon', data: [[1009.0, 0.03], [3042.0, 0.03], [3042.0, 11.01], [1009.0, 11.01]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Puniceum Anemone (Icy body0', type: 'polygon', data: [[75.0, 0.17], [679.0, 0.17], [679.0, 2.3], [75.0, 2.3]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Blatteum Bioluminescent Anemone (High metal content world0', type: 'polygon', data: [[230.0, 0.13], [997.0, 0.13], [997.0, 8.73], [230.0, 8.73]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Croceum Anemone (Rocky body0', type: 'polygon', data: [[213.0, 0.04], [439.0, 0.04], [439.0, 0.31], [213.0, 0.31]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Rubeum Bioluminescent Anemone (Metal-rich body0', type: 'polygon', data: [[1001.0, 0.03], [1782.0, 0.03], [1782.0, 3.83], [1001.0, 3.83]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Rubeum Bioluminescent Anemone (High metal content world0', type: 'polygon', data: [[164.0, 0.04], [998.0, 0.04], [998.0, 3.75], [164.0, 3.75]], showInLegend: false, marker: { enabled: false }, color: 'orange', opacity: 0.5 },
				{ name: 'Roseum Sinuous Tubers (Rocky body0', type: 'polygon', data: [[200.0, 0.04], [497.0, 0.04], [497.0, 0.27], [200.0, 0.27]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Roseum Sinuous Tubers (High metal content world0', type: 'polygon', data: [[201.0, 0.06], [499.0, 0.06], [499.0, 3.01], [201.0, 3.01]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Albidum Sinuous Tubers (Rocky body0', type: 'polygon', data: [[206.0, 0.04], [424.0, 0.04], [424.0, 0.22], [206.0, 0.22]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Prasinum Sinuous Tubers (Rocky body0', type: 'polygon', data: [[208.0, 0.04], [488.0, 0.04], [488.0, 0.22], [208.0, 0.22]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Violaceum Sinuous Tubers (High metal content world0', type: 'polygon', data: [[219.0, 0.09], [491.0, 0.09], [491.0, 1.62], [219.0, 1.62]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Viride Sinuous Tubers (High metal content world0', type: 'polygon', data: [[219.0, 0.09], [491.0, 0.09], [491.0, 1.6], [219.0, 1.6]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Blatteum Sinuous Tubers (Rocky body0', type: 'polygon', data: [[205.0, 0.04], [473.0, 0.04], [473.0, 0.49], [205.0, 0.49]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Violaceum Sinuous Tubers (Rocky body0', type: 'polygon', data: [[203.0, 0.04], [490.0, 0.04], [490.0, 0.49], [203.0, 0.49]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Prasinum Sinuous Tubers (High metal content world0', type: 'polygon', data: [[229.0, 0.07], [491.0, 0.07], [491.0, 2.62], [229.0, 2.62]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Lindigoticum Sinuous Tubers (Rocky body0', type: 'polygon', data: [[209.0, 0.04], [490.0, 0.04], [490.0, 0.49], [209.0, 0.49]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Viride Sinuous Tubers (Rocky body0', type: 'polygon', data: [[327.0, 0.08], [429.0, 0.08], [429.0, 0.14], [327.0, 0.14]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Blatteum Sinuous Tubers (High metal content world0', type: 'polygon', data: [[219.0, 0.08], [491.0, 0.08], [491.0, 1.62], [219.0, 1.62]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Albidum Sinuous Tubers (High metal content world0', type: 'polygon', data: [[201.0, 0.05], [487.0, 0.05], [487.0, 2.13], [201.0, 2.13]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Lindigoticum Sinuous Tubers (High metal content world0', type: 'polygon', data: [[219.0, 0.08], [491.0, 0.08], [491.0, 0.41], [219.0, 0.41]], showInLegend: false, marker: { enabled: false }, color: 'purple', opacity: 0.5 },
				{ name: 'Roseum Brain Tree (High metal content world0', type: 'polygon', data: [[201.0, 0.03], [498.0, 0.03], [498.0, 2.97], [201.0, 2.97]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Roseum Brain Tree (Rocky body0', type: 'polygon', data: [[200.0, 0.04], [499.0, 0.04], [499.0, 0.42], [200.0, 0.42]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Roseum Brain Tree (Icy body0', type: 'polygon', data: [[200.0, 0.03], [247.0, 0.03], [247.0, 0.26], [200.0, 0.26]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Ostrinum Brain Tree (High metal content world0', type: 'polygon', data: [[204.0, 0.04], [997.0, 0.04], [997.0, 1.64], [204.0, 1.64]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Lividum Brain Tree (Rocky body0', type: 'polygon', data: [[300.0, 0.04], [496.0, 0.04], [496.0, 0.42], [300.0, 0.42]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Puniceum Brain Tree (High metal content world0', type: 'polygon', data: [[129.0, 0.05], [998.0, 0.05], [998.0, 3.46], [129.0, 3.46]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Puniceum Brain Tree (Metal-rich body0', type: 'polygon', data: [[1004.0, 0.05], [1733.0, 0.05], [1733.0, 1.9], [1004.0, 1.9]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Gypseeum Brain Tree (Rocky body0', type: 'polygon', data: [[200.0, 0.04], [329.0, 0.04], [329.0, 0.29], [200.0, 0.29]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Aureum Brain Tree (Rocky body0', type: 'polygon', data: [[303.0, 0.04], [486.0, 0.04], [486.0, 0.46], [303.0, 0.46]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Lindigoticum Brain Tree (Rocky body0', type: 'polygon', data: [[370.0, 0.05], [499.0, 0.05], [499.0, 0.13], [370.0, 0.13]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Viride Brain Tree (Rocky Ice world0', type: 'polygon', data: [[100.0, 0.04], [242.0, 0.04], [242.0, 0.39], [100.0, 0.39]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Ostrinum Brain Tree (Metal-rich body0', type: 'polygon', data: [[1000.0, 0.05], [1794.0, 0.05], [1794.0, 2.12], [1000.0, 2.12]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Aureum Brain Tree (High metal content world0', type: 'polygon', data: [[355.0, 0.06], [491.0, 0.06], [491.0, 2.28], [355.0, 2.28]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Lindigoticum Brain Tree (High metal content world0', type: 'polygon', data: [[355.0, 0.2], [478.0, 0.2], [478.0, 2.28], [355.0, 2.28]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },
				{ name: 'Roseum Brain Tree (Rocky Ice world0', type: 'polygon', data: [[200.0, 0.08], [242.0, 0.08], [242.0, 0.26], [200.0, 0.26]], showInLegend: false, marker: { enabled: false }, color: 'blue', opacity: 0.5 },


				/*"ming": 0.04940613159, "maxg": 2.884510296, "mint": 1000, "maxt": 1672,*/

				{
					name: 'A 1 - High Metal Content',
					color: 'rgba(223, 83, 83, .5)',
					marker: {
						symbol: 'circle'
					},
					data: [[50, 0]]

				}, {
					name: 'A 2 - (Rocky Body)',
					color: 'rgba(119, 152, 191, .5)',
					marker: {
						symbol: 'circle'
					},
					data: [[2000, 4]]
				}]
		});
	</script>

	<p>
	<div id="results-table">&nbsp;</div>
	</p>
	<p>
	<div id="entries-table">&nbsp;</div>
	<br />
	<br />
	<br />
	<br />
	<br />
	<br />
	<br />
	</P>

	</div><!-- /.container -->
	<!-- Footer -->
	<footer id="footer">
		<ul class="icons">
			<li><a href="http://twitter.com/CanonnResearch" class="icon brands fa-twitter"><span
						class="label">Twitter</span></a></li>
			<li><a href="https://github.com/canonn-science/Aurvandil/blob/master/README.md"
					class="icon brands fa-github"><span class="label">GitHub</span></a></li>
		</ul>
		<ul class="copyright">
			<li>&copy; Canonn Interstellar Research.</li>
			<li>Credits: <a href="http://html5up.net">HTML5 UP</a></li>
		</ul>
	</footer>

	<!-- Scripts -->
	<script src="assets/js/main.js"></script>

</body>

</html>